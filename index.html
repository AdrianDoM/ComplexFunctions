<html>
  <head>
    <title>Complex Functions</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/6.2.2/math.min.js"></script>
    <script type="text/javascript" src="variable.js"></script>
    <script type="text/javascript" src="interval.js"></script>
    <script type="text/javascript" src="contour.js"></script>
    <script type="text/javascript" src="deltavar.js"></script>
    <script type="text/javascript" src="plot.js"></script>
    <script type="text/javascript" src="display.js"></script>

    <style>
      .plot {
        border: solid black 2px;
        box-sizing: content-box;
        margin: 10px;
      }

      #domain {
        border-color: red;
      }

      #image {
        border-color: blue;
      }
    </style>

  </head>
  <body>
    <h1>Complex Functions</h1>

    <canvas class="plot" id="domain" width=400px height=400px></canvas>
    <canvas class="plot" id="image"  width=400px height=400px></canvas>

    <p><button id="domainReset">Reset view</button> z = <span id="z">-</span></p>
    <p><button id="imageReset">Reset view</button> f(z) = <span id="w">-</span></p>
    
    <p><button id="animate">Animate contour</button></p>

    <script>
      const
      domainCanv = document.getElementById('domain'),
      imageCanv  = document.getElementById('image'),
      zSpan      = document.getElementById('z'),
      wSpan      = document.getElementById('w'),
      dResetButton  = document.getElementById('domainReset'),
      iResetButton  = document.getElementById('imageReset'),
      animateButton = document.getElementById('animate')

      const
      t          = new Interval('t', 0, 2*Math.PI, 100, 20),
      c          = new Contour('c', '1/2+e^(i*t)', t),
      wc         = new Contour('wc', '1/(1/2+e^(i*t))', t,'lightgreen'),
      z          = new Variable('z', undefined, [c], 'red'),
      w          = new Variable('w', '1/z', [z], 'darkOrange'),
      dz         = new DeltaVar('dz', z),
      domainPlot = new Plot(domainCanv, [c, z]),
      imagePlot  = new Plot(imageCanv, [wc, w, dz]),
      displayZ   = new Display(zSpan, z),
      displayW   = new Display(wSpan, w)

      dResetButton.onclick  = () => domainPlot.resetView()
      iResetButton.onclick  = () => imagePlot.resetView()
      animateButton.onclick = () => t.animate(false)
    </script>

  </body>
</html>