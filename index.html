<html>
  <head>
    <title>Complex Functions</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/6.2.2/math.min.js"></script>
    <script type="text/javascript" src="variable.js"></script>
    <script type="text/javascript" src="contour.js"></script>
    <script type="text/javascript" src="plot.js"></script>
    <script type="text/javascript" src="display.js"></script>

    <style>
      .plot {
        border: solid black 2px;
        box-sizing: content-box;
        margin: 10px;
      }

      #domain {
        border-color: red;
      }

      #image {
        border-color: blue;
      }
    </style>

  </head>
  <body>
    <h1>Complex Functions</h1>

    <canvas class="plot" id="domain" width=400px height=400px></canvas>
    <canvas class="plot" id="image"  width=400px height=400px></canvas>

    <p><button id="domainReset">Reset view</button> z = <span id="z">-</span></p>
    <p><button id="imageReset">Reset view</button> f(z) = <span id="w">-</span></p>
    
    <p><button id="animate">Animate contour</button></p>

    <script>
      const
      domainCanv = document.getElementById('domain'),
      imageCanv  = document.getElementById('image'),
      zSpan      = document.getElementById('z'),
      wSpan      = document.getElementById('w'),
      dResetButton  = document.getElementById('domainReset'),
      iResetButton  = document.getElementById('imageReset'),
      animateButton = document.getElementById('animate')

      const
      c          = new Contour('c', '1/2+e^(i*t)', 't', 0, 2*Math.PI, 100, 40),
      z          = new Variable('z', 'red', undefined, [c]),
      w          = new Variable('w', 'darkOrange', '1/z', [z]),
      wdc        = new Variable('wdc', 'brown', `${c.stepSize} * w * dc`, [w, c.dVar])
      domainPlot = new Plot(domainCanv, [c, z]),
      imagePlot  = new Plot(imageCanv, [c.dVar, w, wdc]),
      displayZ   = new Display(zSpan, z),
      displayW   = new Display(wSpan, w)

      dResetButton.onclick  = () => domainPlot.resetView()
      iResetButton.onclick  = () => imagePlot.resetView()
      animateButton.onclick = () => c.animate(true)
    </script>

  </body>
</html>